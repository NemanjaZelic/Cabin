const fs = require('fs');
const path = require('path');

// Minimalna validna JPEG slika (1x1 pixel, crvena boja)
const minimalJPEG = Buffer.from([
  0xFF, 0xD8, 0xFF, 0xE0, 0x00, 0x10, 0x4A, 0x46, 0x49, 0x46, 0x00, 0x01,
  0x01, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 0xFF, 0xDB, 0x00, 0x43,
  0x00, 0x08, 0x06, 0x06, 0x07, 0x06, 0x05, 0x08, 0x07, 0x07, 0x07, 0x09,
  0x09, 0x08, 0x0A, 0x0C, 0x14, 0x0D, 0x0C, 0x0B, 0x0B, 0x0C, 0x19, 0x12,
  0x13, 0x0F, 0x14, 0x1D, 0x1A, 0x1F, 0x1E, 0x1D, 0x1A, 0x1C, 0x1C, 0x20,
  0x24, 0x2E, 0x27, 0x20, 0x22, 0x2C, 0x23, 0x1C, 0x1C, 0x28, 0x37, 0x29,
  0x2C, 0x30, 0x31, 0x34, 0x34, 0x34, 0x1F, 0x27, 0x39, 0x3D, 0x38, 0x32,
  0x3C, 0x2E, 0x33, 0x34, 0x32, 0xFF, 0xC0, 0x00, 0x0B, 0x08, 0x00, 0x01,
  0x00, 0x01, 0x01, 0x01, 0x11, 0x00, 0xFF, 0xC4, 0x00, 0x14, 0x00, 0x01,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0xFF, 0xDA, 0x00, 0x08, 0x01, 0x01, 0x00, 0x00,
  0x3F, 0x00, 0x7F, 0xA0, 0xFF, 0xD9
]);

// Kreiraj test-data direktorijum
const testDataDir = path.join(__dirname, 'test-data');
if (!fs.existsSync(testDataDir)) {
  fs.mkdirSync(testDataDir, { recursive: true });
}

// Kreiraj test slike
fs.writeFileSync(path.join(testDataDir, 'test-profile.jpg'), minimalJPEG);
console.log('✓ Kreirana test-profile.jpg');

fs.writeFileSync(path.join(testDataDir, 'test-profile-vlasnik.jpg'), minimalJPEG);
console.log('✓ Kreirana test-profile-vlasnik.jpg');

fs.writeFileSync(path.join(testDataDir, 'test-vikendica-1.jpg'), minimalJPEG);
console.log('✓ Kreirana test-vikendica-1.jpg');

fs.writeFileSync(path.join(testDataDir, 'test-vikendica-2.jpg'), minimalJPEG);
console.log('✓ Kreirana test-vikendica-2.jpg');

// Kreiraj veliku sliku za test validacije (10MB)
const largeImageData = Buffer.alloc(10 * 1024 * 1024, 0xFF);
fs.writeFileSync(path.join(testDataDir, 'test-large.jpg'), largeImageData);
console.log('✓ Kreirana test-large.jpg (10MB)');

// Kreiraj test JSON fajl za vikendice
const testVikendice = [
  {
    "naziv": "Planinska koliba",
    "mesto": "Zlatibor",
    "opis": "Prelepa koliba sa pogledom na planinu",
    "cenaLetnja": 80,
    "cenaZimska": 120,
    "brojKreveta": 4,
    "brojSoba": 2,
    "lat": 43.7295,
    "lng": 19.7159,
    "telefon": "0641234567"
  },
  {
    "naziv": "Šumski raj",
    "mesto": "Kopaonik",
    "opis": "Mirna vikendica u srcu prirode",
    "cenaLetnja": 100,
    "cenaZimska": 150,
    "brojKreveta": 6,
    "brojSoba": 3,
    "lat": 43.2893,
    "lng": 20.8112,
    "telefon": "0647654321"
  }
];

fs.writeFileSync(
  path.join(testDataDir, 'vikendice-import.json'),
  JSON.stringify(testVikendice, null, 2)
);
console.log('✓ Kreiran vikendice-import.json');

console.log('\n✅ Svi test fajlovi su kreirani uspešno!');
